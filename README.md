## 目的

ドラッグ（スワイプ）でスライドするオブジェクトのコンポーネントを開発する

slickやswiperの様な特定widthでスライドする方式ではなくドラッグ量に応じてスライドする方式で開発する。

## app概要

es6で構築されたスライドコンポーネントプロジェクトのプロトタイプです。

## 要件

* es6で開発する
* クロスブラウザで動作させる
* ドラッグ（スワイプ）量に応じてスライドさせる
* 離すとイージングで止まる
* 無限スクロールを可能にする
* 上下左右のスライドを可能にする
* 設定なしで特定オブジェクト内にエレメントを置くだけでスライドさせる

## 開発環境

* JavaScript(ES6)

## ロジック

* ダウン→ドラッグ→アップでリスナー登録削除を連動させる
* マウスダウンでオブジェクトをクローンする
* ドラッグで座標位置の監視を開始する
* マウスアップでイージング処理開始し止まったら監視終了

## 課題

* イージング中も監視するのでメモリ使用時間が長くなる
* イージング計算式によっては無限ループに陥る
* イージング関連のコード量が多くなる

## ポイント

* オブジェクトがwrapper以下の場合はスライドさせない
* リサイズ処理で現在位置を保ったままにしている
* 無限ループにならないよう小数点切り上げとタイマー処理で強制終了させる
* クローンは左右2つ作成し座標で位置を制御し実際にスライドしているのは真ん中だけにする事でメモリを食わない
* translate3dとrequestAnimationFrameでフレームレート保ちパフォーマンスを向上させる
* 範囲制限はMath.max, Math.minを使用して分かりやすく書く

## 結論

webでもスマホでも問題なく動作する。メモリ消費も少なく処理落ちもない。

使う場面を想定した場合、上下スライドとイージングと無限スライドは要らない。

左右スライドだけにした場合、余計な分岐がなくなりパフォーマンス向上とコードの視認性が増し扱い易いコンポーネントになる。

どうしてもイージングしたい場合は自作計算式ではなくcssのイージングを使用すればコード量を抑える事ができる。それによって特に問題は起こらない。
